commit-msg:
  jobs:
    - name: Validate Commit Message Format
      run: npx commitlint --edit
      fail_text: |
        ❌ Commit message does not follow Conventional Commit format.

        👉 To fix this, use the guided commit command:
          npm run commit
           
        📘 Example: feat(login): add user authentication

pre-commit:
  jobs:
    - name: delete-stale-changeset
      run: |
        echo "🧹 Removing old .changeset/*.md files..."
        find .changeset -type f -name "*.md" ! -name "README.md" -delete
      file_types:
        - md
      exclude:
        - .changesets/README.md
      fail_text: "❌ You have stale .changeset/*.md files. Clean them up!"

    - name: open-changeset-cli
      run: |
        echo "📦 Prompting for changeset..."
        npx @changesets/cli
      interactive: true
